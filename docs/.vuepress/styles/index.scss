:root {
    --mermaid-primary-bg: #f0f9f4;
    --mermaid-border: #3eaf7c;
    --mermaid-text: #2c3e50;
}

html.dark {
    /* 深度暗色方案，对比度降到最低 */
    --mermaid-primary-bg: #1a1a1c;
    /* 接近黑色 */
    --mermaid-border: #2d5a45;
    /* 极其深绿 */
    --mermaid-text: #8b949e;
    /* 灰色文字，不刺眼 */
}

/* 强制覆盖 Mermaid 内部生成的颜色 */
.mermaid svg {
    background-color: transparent !important;
}

/* 通过 CSS 变量在运行时动态修改样式，这是最稳定支持暗黑模式的方法 */
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node polygon,
.mermaid .node path {
    fill: #f0f9f4 !important;
    /* 默认浅绿 */
    stroke: #3eaf7c !important;
}

.mermaid .node .label,
.mermaid .edgeLabel {
    color: #2c3e50 !important;
    fill: #2c3e50 !important;
}

html.dark .mermaid .node rect,
html.dark .mermaid .node circle,
html.dark .mermaid .node polygon,
html.dark .mermaid .node path {
    fill: var(--mermaid-primary-bg) !important;
    stroke: var(--mermaid-border) !important;
}

html.dark .mermaid .node .label,
html.dark .mermaid .edgeLabel {
    color: var(--mermaid-text) !important;
    fill: var(--mermaid-text) !important;
}

html.dark .mermaid .edgePath .path {
    stroke: var(--mermaid-border) !important;
}

html.dark .mermaid .marker {
    fill: var(--mermaid-border) !important;
}

html.dark .mermaid .messageLine1 {
    stroke: var(--mermaid-border) !important;
}

/* --- iPad 适配: 强制显示侧边栏开关 --- */
/* VuePress 默认只在 < 719px 显示开关。这里强制在 1200px 以下 (iPad 横屏) 也使用移动端侧边栏模式 */
@media (max-width: 1200px) {
    /* 1. 显示左上角的汉堡菜单按钮 */
    .toggle-sidebar-button {
        display: block !important;
    }

    /* 2. 隐藏侧边栏 (默认收起) */
    .theme-container .sidebar {
        transform: translateX(-100%);
        transition: transform .2s;
    }

    /* 3. 当点击按钮激活 'sidebar-open' 类时，显示侧边栏 */
    .theme-container.sidebar-open .sidebar {
        transform: translateX(0);
    }

    /* 4. 移除内容的左侧但在距 (原本是为了避开固定侧边栏) */
    .theme-container .page {
        padding-left: 0 !important;
    }
    
    /* 5. 调整Navbar标题位置，避免被按钮遮挡 (视情况而定，默认通常可以) */
    .theme-container .navbar {
        padding-left: 4rem;
    }
}