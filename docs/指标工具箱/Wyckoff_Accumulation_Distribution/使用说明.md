# Wyckoff Accumulation Distribution (RSI-Based)

## 工具资料
*   [原文地址 (TradingView)](https://cn.tradingview.com/v/eKXiwaeS/) - 作者: faytterro

这一指标基于 RSI 形态来识别威科夫市场阶段（吸筹与派发）。它自动检测 RSI 的震荡区间（Sideways Zone）并标记相应的价格结构，帮助交易者可视化供需转换。

## 核心功能与逻辑

### RSI 震荡区间与箱体
指标首先识别 RSI 处于某一特定区间（通常是 50 附近）的横盘状态，这被视为潜在的吸筹或派发准备区。
*   **动态箱体**：根据 RSI 震荡期间的价格最高点和最低点绘制灰色箱体。
*   **阶段确认**：
    *   **吸筹 (Accumulation)**：当 RSI **向上突破** 震荡区间时，箱体标记为 **绿色**。
    *   **派发 (Distribution)**：当 RSI **向下跌破** 震荡区间时，箱体标记为 **红色**。

### 自动威科夫标记
指标尝试自动识别并标记关键的威科夫事件点（通过 RSI 极值点的价格反转）：
*   **SC / BC** (Selling/Buying Climax)：抛售高潮 / 恐慌买入。
*   **AR / DAR** (Automatic Rally / Reaction)：自动反弹 / 自动回撤。
*   **ST / DST** (Secondary Test)：二次测试。
*   **Sign of Strength / Weakness**：强势/弱势信号。

## 图表元素详解 (Chart Visuals)

根据 Pine Script 源码，指标在图表上绘制了以下三类核心内容，分别对应威科夫分析的不同维度：

### 1. 阶段箱体 (Boxes) / 市场状态
指标通过 RSI 震荡来界定“盘整区”，并根据突破方向定义随后的趋势性质。

| 视觉元素     | 颜色                                | 触发条件 (Code Logic)                     | 含义                                                                              |
| :----------- | :---------------------------------- | :---------------------------------------- | :-------------------------------------------------------------------------------- |
| **灰色箱体** | 灰色                                | RSI 在阈值区间内震荡 (`50 ± Sensitivity`) | **震荡/盘整**：市场处于无趋势状态 (Sideways)。箱体上下沿标记了此期间最高/最低价。 |
| **绿色箱体** | **<font color="green">绿色</font>** | RSI **向上突破** 震荡区间 (> 70)          | **吸筹 (Accumulation)**：震荡结束，多头爆发，确认此前的盘整为吸筹区间。           |
| **红色箱体** | **<font color="red">红色</font>**   | RSI **向下跌破** 震荡区间 (< 30)          | **派发 (Distribution)**：震荡结束，空头爆发，确认此前的盘整为派发区间。           |

### 2. 关键事件标记 (Markers)
指标自动识别符合威科夫定义的关键转折点（K线极值 + RSI极值得出的结构点）。

**吸筹阶段 (Accumulation Sequence):** (绿色信号)
*   **SC (Selling Climax)**: <font color="green">▲ 绿色三角 (下)</font>
    *   **抛售高潮**。出现条件：形成 Pivot Low 且 RSI < 30 (超卖)。代表恐慌性抛售见底。
*   **AR (Automatic Rally)**: <font color="green">▼ 绿色三角 (上)</font>
    *   **自动反弹**。出现条件：SC 之后的第一个 Pivot High。代表抛售压力衰竭后的自然回升。
*   **ST (Secondary Test)**: <font color="green">▲ 绿色三角 (下)</font>
    *   **二次测试**。出现条件：SC 之后的 Pivot Low。代表再次测试底部支撑有效性。

**派发阶段 (Distribution Sequence):** (红色信号)
*   **BC (Buying Climax)**: <font color="red">▼ 红色三角 (上)</font>
    *   **恐慌买入**。出现条件：形成 Pivot High 且 RSI > 70 (超买)。代表情绪化追涨见顶。
*   **AR (Automatic Reaction)**: <font color="red">▲ 红色三角 (下)</font>
    *   **自动回撤**。出现条件：BC 之后的第一个 Pivot Low。代表买力枯竭后的自然回落。
*   **ST (Secondary Test)**: <font color="red">▼ 红色三角 (上)</font>
    *   **二次测试**。出现条件：BC 之后的 Pivot High。代表再次测试顶部阻力确认。

### 3. 普通结构点
| 视觉元素       | 颜色                                 | 含义                                                                                        |
| :------------- | :----------------------------------- | :------------------------------------------------------------------------------------------ |
| **普通 Pivot** | <font color="orange">橙色三角</font> | **普通高低点**。既不符合 SC/BC 极端条件，也不是关键序列的一部分，仅作为普通的价格结构参考。 |

### 4. K线染色 (Bar Color)
*   **亮绿色 K 线** (`color.lime`)：RSI 向上突破震荡区的确切 K 线位置（吸筹确认点）。
*   **紫色 K 线** (`color.purple`)：RSI 向下跌破震荡区的确切 K 线位置（派发确认点）。

## 实战用法
*   **适用周期**：作者建议用于 **4小时 (4H)** 或 **日线 (Daily)** 图表。较小周期可能噪音过多。
*   **信号解读**：
    *   **做多机会**：出现 **绿色箱体**，且伴随吸筹阶段的确认信号（如 ST, Spring 等）。
    *   **做空机会**：出现 **红色箱体**，且伴随派发阶段的确认信号（如 UT, LPSY 等）。
*   **结合分析**：虽然指标提供自动标记，但作者建议必须结合实际的价格行为（Price Action）进行综合研判，不要盲目依赖单一指标信号。

## 设置说明
*   **Zone Range**：RSI 震荡区的宽度阈值（默认 ±20，即 30-70 或 40-60 之间）。
*   **pivotLen**：识别极值点（Pivot）的长度，影响标记的灵敏度。

## 脚本下载
*   [下载脚本](./Wyckoff_AD.pine)
