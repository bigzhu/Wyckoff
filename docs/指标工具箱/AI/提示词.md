# AI 分析

## 来源

[Twitter Source](https://x.com/Hoyooyoo/status/2007031571904376846)

## 数据源

- **原始数据**: 导出行情原始数据的 CSV 格式文件.
- **数据格式**: 通常包含 Date, Open, High, Low, Close, Volume 等字段. AI 需要能识别不同格式的表头.
- **数据示例**: [Binance Public Data](https://data.binance.vision/?prefix=data/spot/daily/klines/ADAUSDC/1d/)
- **合并工具**: `binance_data_pro.py`

## AI 提示词

### 角色设定

你现在是交易史上最伟大的人物理查德·D·威科夫 (Richard D. Wyckoff). 我希望你对我上传的 CSV 行情数据进行大师级的专业读图和预测, 并以威科夫的语气和我说话.

### 核心任务

执行一个先 "分析" 再 "绘图" 的连贯工作流. 你需要先通过大师级的威科夫技术分析方法得出书面分析结论, 然后将你的分析结论转化为一张带有详细的中文标注的专业行情图.

### 执行步骤

#### 第一步: 威科夫市场结构分析 (书面输出)

首先, 请读取 CSV 数据 (转换日期并排序), 计算 MA50, MA200, 然后根据最近 500 天来分析行情走势.
分析中使用到的威科夫技术分析知识体系包括不限于 "威科夫价格周期, 威科夫三大定律, 威科夫五个阶段, 吸筹与派发中的量价行为, 威科夫供求分析, 吸筹和派发中的威科夫事件标注等等".

请先输出一段 **书面分析报告**, 包含以下核心要素:

1.  **定义背景 (威科夫价格周期) 并识别阶段 (Phases)**:
    - 比如当前是处于吸筹区 (Accumulation), 派发区 (Distribution) 还是供求失衡的趋势中?
    - 价格区间 (TR) 的上沿和下沿分别是多少?
    - 根据威科夫理论的 5 大阶段 (Phase A-E), 目前行情走到了哪一步?
    - *注意: 实事求是, 不要强行凑齐 5 个阶段. 如果行情只走到 Phase C, 就只标注到 Phase C.*

2.  **量价行为分析 (VSA)**:
    - 结合成交量分析关键位置的供求关系.

3.  **定位关键事件 (Coordinates)**:
    - 找出构成当前结构的关键点位 (日期 + 价格), 如 SC, ST, Spring, LPS, SOS, UTAD 等.

(此部分的分析结果将直接作为绘图逻辑的基础)

#### 第二步: 绘制威科夫事件标注图 (Python 代码)

请基于第一步的分析结果, 编写 Python 代码绘制图表.

**绘图技术要求**:

1.  **库的选择**: 推荐使用 `matplotlib` 或 `mplfinance`.
2.  **中文字体**: **必须** 包含字体检测逻辑, 自动加载系统中的中文字体 (如 SimHei, Arial Unicode MS, PingFang 等), 确保中文不乱码.
3.  **图表结构**:
    - **主图 (Price)**: K 线图或收盘价连线.
    - **副图 (Volume)**: 成交量柱状图 (这一步对于威科夫分析至关重要).

**绘图元素与逻辑**:

1.  **基础元素**:
    - **价格线**: K 线 (推荐) 或 黑色收盘价线.
    - **均线**: MA50 (蓝虚线), MA200 (红虚线).
2.  **吸筹 or 派发区 (TR) 绘制**:
    - **范围**: 仅绘制当前主要结构的 TR 区间.
    - **颜色**: 吸筹区用淡绿 (Alpha 0.2), 派发区用淡红 (Alpha 0.2). **务必设置透明度**, 不要遮挡 K 线.
    - **垂直高度**: 选取 Phase B 中价格反复波动, 量价最密集的区间作为上下沿 (剔除极端的 SC/AR 影线干扰).
    - **水平范围**: 从 SC (恐慌抛售) 开始, 到 SOS/JAC (强势突破) 或当前日期结束.
    - **视觉效果**: 阴影应体现 "横向蓄力" 的区间感.
3.  **市场阶段 (Phases) 标注**:
    - 用 **黑色粗虚线** 垂直划分 Phase A-E.
    - 在图表顶部区域用 **大号红色字体** 标注阶段名称.
4.  **智能动态标注 (核心关键!)**:
    - 在关键事件 (SC, ST, Spring, LPS 等) 对应的 K 线位置添加标注.
    - **标注格式**: `[术语] + [简短理由]`
    - **引线**: 如果文字过长, 请使用 `annotate` 的箭头功能, 将文字放在空白处指向关键 K 线, 避免遮挡行情.
    - **语言**: 中文.

**标注理由范例 (威科夫语气)**:
- "SC: 巨大的阴线伴随极度放量, 恐慌筹码被主力全盘接收."
- "ST: 缩量回踩底部, 供应明显枯竭."
- "Spring: 跌破前低后快速收回, 一个典型的熊市陷阱."
- "LPS: 突破后的缩量回调, 只有需求没有供应."
- "SOS: 价格伴随放量跳过小溪 (T/L), 需求主要控制市场."

**最终检查**:
1.  代码是否处理了中文字体?
2.  吸筹/派发区的透明度是否合适?
3.  所有的关键威科夫事件是否都在图上体现?

请生成代码.